<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Request Password Reset - Tarmonia</title>
  <link rel="stylesheet" href="css/style.css">
  <style> .reset-box{max-width:480px;margin:48px auto;padding:24px;background:#fff;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.06);} label{display:block;margin-bottom:8px;} input{width:100%;padding:8px;margin-bottom:12px;} button{padding:10px 16px;background:#72b16a;color:#fff;border:0;border-radius:6px;} .note{color:#666;font-size:13px;} </style>
</head>
<body>
  <div class="reset-box">
    <h2>Forgot your password?</h2>
    <p class="note">Enter the email associated with your account. We'll send a link to reset your password.</p>
    <form id="requestForm">
      <label>Email address</label>
      <input type="email" id="email" required>
      <button type="submit">Send reset link</button>
    </form>
    <div id="message" style="margin-top:12px;color:#070;"></div>
  </div>

  <script>
    document.getElementById('requestForm').addEventListener('submit', async function(e){
      e.preventDefault();
      const email = document.getElementById('email').value;
      try{
        const fd = new FormData(); fd.append('email', email);
        const res = await fetch('includes/auth_request_password_reset.php', { method:'POST', body: fd, credentials: 'same-origin' });
        const j = await res.json();
        if(j.success){ document.getElementById('message').textContent = 'If that email exists we sent a reset link.'; } else { document.getElementById('message').textContent = j.error || 'Failed'; }
      }catch(err){ document.getElementById('message').textContent = 'Server error'; }
    });
  </script>
</body>
</html>
